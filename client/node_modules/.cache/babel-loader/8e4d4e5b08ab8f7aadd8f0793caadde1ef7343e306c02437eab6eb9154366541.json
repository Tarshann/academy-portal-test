{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\academy-portal-test\\\\client\\\\src\\\\components\\\\messages\\\\MessageInput.js\",\n  _s = $RefreshSig$();\n// client/src/components/messages/MessageInput.js\nimport React, { useState, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MessageInput = ({\n  onSendMessage,\n  conversationId\n}) => {\n  _s();\n  const [message, setMessage] = useState('');\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadPreview, setUploadPreview] = useState(null);\n  const [uploadFile, setUploadFile] = useState(null);\n  const fileInputRef = useRef(null);\n\n  // Handle text input change\n  const handleInputChange = e => {\n    setMessage(e.target.value);\n  };\n\n  // Handle form submission\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (message.trim() === '' && !uploadFile) return;\n    if (uploadFile) {\n      // Send message with media\n      onSendMessage(message.trim(), 'media', uploadFile);\n    } else {\n      // Send text message\n      onSendMessage(message.trim());\n    }\n\n    // Reset form\n    setMessage('');\n    setUploadPreview(null);\n    setUploadFile(null);\n  };\n\n  // Handle key press events\n  const handleKeyPress = e => {\n    // Send message on Enter (without Shift)\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n\n  // Handle file selection\n  const handleFileSelect = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Check file size (10MB max)\n    const maxSize = 10 * 1024 * 1024; // 10MB\n    if (file.size > maxSize) {\n      alert('File is too large. Maximum size is 10MB.');\n      return;\n    }\n    setUploadFile(file);\n\n    // Create preview for images\n    if (file.type.startsWith('image/')) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        setUploadPreview(e.target.result);\n      };\n      reader.readAsDataURL(file);\n    } else {\n      // For non-image files, just show the filename\n      setUploadPreview(file.name);\n    }\n  };\n\n  // Trigger file input click\n  const openFileSelector = () => {\n    fileInputRef.current.click();\n  };\n\n  // Cancel upload\n  const cancelUpload = () => {\n    setUploadPreview(null);\n    setUploadFile(null);\n    // Reset the file input\n    fileInputRef.current.value = null;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"message-input-container\",\n    children: [uploadPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload-preview\",\n      children: [typeof uploadPreview === 'string' && uploadPreview.startsWith('data:image') ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-preview\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: uploadPreview,\n          alt: \"Upload preview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-preview\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-file\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: uploadPreview\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"cancel-upload\",\n        onClick: cancelUpload,\n        \"aria-label\": \"Cancel upload\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-times\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"message-form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"attachment-button\",\n        onClick: openFileSelector,\n        \"aria-label\": \"Attach file\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-paperclip\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        ref: fileInputRef,\n        onChange: handleFileSelect,\n        style: {\n          display: 'none'\n        },\n        accept: \"image/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,text/plain\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"message-input\",\n        placeholder: \"Type a message...\",\n        value: message,\n        onChange: handleInputChange,\n        onKeyPress: handleKeyPress,\n        disabled: isUploading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"send-button\",\n        disabled: message.trim() === '' && !uploadFile,\n        \"aria-label\": \"Send message\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-paper-plane\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n_s(MessageInput, \"/MiyXHkmMS9jZujYmXZKLTO6fC0=\");\n_c = MessageInput;\nexport default MessageInput;\nvar _c;\n$RefreshReg$(_c, \"MessageInput\");","map":{"version":3,"names":["React","useState","useRef","jsxDEV","_jsxDEV","MessageInput","onSendMessage","conversationId","_s","message","setMessage","isUploading","setIsUploading","uploadPreview","setUploadPreview","uploadFile","setUploadFile","fileInputRef","handleInputChange","e","target","value","handleSubmit","preventDefault","trim","handleKeyPress","key","shiftKey","handleFileSelect","file","files","maxSize","size","alert","type","startsWith","reader","FileReader","onload","result","readAsDataURL","name","openFileSelector","current","click","cancelUpload","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","ref","onChange","style","display","accept","placeholder","onKeyPress","disabled","_c","$RefreshReg$"],"sources":["C:/Users/user/academy-portal-test/client/src/components/messages/MessageInput.js"],"sourcesContent":["// client/src/components/messages/MessageInput.js\r\nimport React, { useState, useRef } from 'react';\r\n\r\nconst MessageInput = ({ onSendMessage, conversationId }) => {\r\n  const [message, setMessage] = useState('');\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadPreview, setUploadPreview] = useState(null);\r\n  const [uploadFile, setUploadFile] = useState(null);\r\n  const fileInputRef = useRef(null);\r\n  \r\n  // Handle text input change\r\n  const handleInputChange = (e) => {\r\n    setMessage(e.target.value);\r\n  };\r\n  \r\n  // Handle form submission\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (message.trim() === '' && !uploadFile) return;\r\n    \r\n    if (uploadFile) {\r\n      // Send message with media\r\n      onSendMessage(message.trim(), 'media', uploadFile);\r\n    } else {\r\n      // Send text message\r\n      onSendMessage(message.trim());\r\n    }\r\n    \r\n    // Reset form\r\n    setMessage('');\r\n    setUploadPreview(null);\r\n    setUploadFile(null);\r\n  };\r\n  \r\n  // Handle key press events\r\n  const handleKeyPress = (e) => {\r\n    // Send message on Enter (without Shift)\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit(e);\r\n    }\r\n  };\r\n  \r\n  // Handle file selection\r\n  const handleFileSelect = (e) => {\r\n    const file = e.target.files[0];\r\n    \r\n    if (!file) return;\r\n    \r\n    // Check file size (10MB max)\r\n    const maxSize = 10 * 1024 * 1024; // 10MB\r\n    if (file.size > maxSize) {\r\n      alert('File is too large. Maximum size is 10MB.');\r\n      return;\r\n    }\r\n    \r\n    setUploadFile(file);\r\n    \r\n    // Create preview for images\r\n    if (file.type.startsWith('image/')) {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setUploadPreview(e.target.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    } else {\r\n      // For non-image files, just show the filename\r\n      setUploadPreview(file.name);\r\n    }\r\n  };\r\n  \r\n  // Trigger file input click\r\n  const openFileSelector = () => {\r\n    fileInputRef.current.click();\r\n  };\r\n  \r\n  // Cancel upload\r\n  const cancelUpload = () => {\r\n    setUploadPreview(null);\r\n    setUploadFile(null);\r\n    // Reset the file input\r\n    fileInputRef.current.value = null;\r\n  };\r\n  \r\n  return (\r\n    <div className=\"message-input-container\">\r\n      {uploadPreview && (\r\n        <div className=\"upload-preview\">\r\n          {typeof uploadPreview === 'string' && uploadPreview.startsWith('data:image') ? (\r\n            <div className=\"image-preview\">\r\n              <img src={uploadPreview} alt=\"Upload preview\" />\r\n            </div>\r\n          ) : (\r\n            <div className=\"file-preview\">\r\n              <i className=\"fas fa-file\"></i>\r\n              <span>{uploadPreview}</span>\r\n            </div>\r\n          )}\r\n          <button \r\n            className=\"cancel-upload\"\r\n            onClick={cancelUpload}\r\n            aria-label=\"Cancel upload\"\r\n          >\r\n            <i className=\"fas fa-times\"></i>\r\n          </button>\r\n        </div>\r\n      )}\r\n      \r\n      <form className=\"message-form\" onSubmit={handleSubmit}>\r\n        <button\r\n          type=\"button\"\r\n          className=\"attachment-button\"\r\n          onClick={openFileSelector}\r\n          aria-label=\"Attach file\"\r\n        >\r\n          <i className=\"fas fa-paperclip\"></i>\r\n        </button>\r\n        \r\n        <input\r\n          type=\"file\"\r\n          ref={fileInputRef}\r\n          onChange={handleFileSelect}\r\n          style={{ display: 'none' }}\r\n          accept=\"image/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,text/plain\"\r\n        />\r\n        \r\n        <textarea\r\n          className=\"message-input\"\r\n          placeholder=\"Type a message...\"\r\n          value={message}\r\n          onChange={handleInputChange}\r\n          onKeyPress={handleKeyPress}\r\n          disabled={isUploading}\r\n        />\r\n        \r\n        <button\r\n          type=\"submit\"\r\n          className=\"send-button\"\r\n          disabled={message.trim() === '' && !uploadFile}\r\n          aria-label=\"Send message\"\r\n        >\r\n          <i className=\"fas fa-paper-plane\"></i>\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageInput;\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhD,MAAMC,YAAY,GAAGA,CAAC;EAAEC,aAAa;EAAEC;AAAe,CAAC,KAAK;EAAAC,EAAA;EAC1D,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACU,WAAW,EAAEC,cAAc,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACY,aAAa,EAAEC,gBAAgB,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACc,UAAU,EAAEC,aAAa,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAMgB,YAAY,GAAGf,MAAM,CAAC,IAAI,CAAC;;EAEjC;EACA,MAAMgB,iBAAiB,GAAIC,CAAC,IAAK;IAC/BT,UAAU,CAACS,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;EAC5B,CAAC;;EAED;EACA,MAAMC,YAAY,GAAIH,CAAC,IAAK;IAC1BA,CAAC,CAACI,cAAc,CAAC,CAAC;IAElB,IAAId,OAAO,CAACe,IAAI,CAAC,CAAC,KAAK,EAAE,IAAI,CAACT,UAAU,EAAE;IAE1C,IAAIA,UAAU,EAAE;MACd;MACAT,aAAa,CAACG,OAAO,CAACe,IAAI,CAAC,CAAC,EAAE,OAAO,EAAET,UAAU,CAAC;IACpD,CAAC,MAAM;MACL;MACAT,aAAa,CAACG,OAAO,CAACe,IAAI,CAAC,CAAC,CAAC;IAC/B;;IAEA;IACAd,UAAU,CAAC,EAAE,CAAC;IACdI,gBAAgB,CAAC,IAAI,CAAC;IACtBE,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;;EAED;EACA,MAAMS,cAAc,GAAIN,CAAC,IAAK;IAC5B;IACA,IAAIA,CAAC,CAACO,GAAG,KAAK,OAAO,IAAI,CAACP,CAAC,CAACQ,QAAQ,EAAE;MACpCR,CAAC,CAACI,cAAc,CAAC,CAAC;MAClBD,YAAY,CAACH,CAAC,CAAC;IACjB;EACF,CAAC;;EAED;EACA,MAAMS,gBAAgB,GAAIT,CAAC,IAAK;IAC9B,MAAMU,IAAI,GAAGV,CAAC,CAACC,MAAM,CAACU,KAAK,CAAC,CAAC,CAAC;IAE9B,IAAI,CAACD,IAAI,EAAE;;IAEX;IACA,MAAME,OAAO,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;IAClC,IAAIF,IAAI,CAACG,IAAI,GAAGD,OAAO,EAAE;MACvBE,KAAK,CAAC,0CAA0C,CAAC;MACjD;IACF;IAEAjB,aAAa,CAACa,IAAI,CAAC;;IAEnB;IACA,IAAIA,IAAI,CAACK,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC,EAAE;MAClC,MAAMC,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAInB,CAAC,IAAK;QACrBL,gBAAgB,CAACK,CAAC,CAACC,MAAM,CAACmB,MAAM,CAAC;MACnC,CAAC;MACDH,MAAM,CAACI,aAAa,CAACX,IAAI,CAAC;IAC5B,CAAC,MAAM;MACL;MACAf,gBAAgB,CAACe,IAAI,CAACY,IAAI,CAAC;IAC7B;EACF,CAAC;;EAED;EACA,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;IAC7BzB,YAAY,CAAC0B,OAAO,CAACC,KAAK,CAAC,CAAC;EAC9B,CAAC;;EAED;EACA,MAAMC,YAAY,GAAGA,CAAA,KAAM;IACzB/B,gBAAgB,CAAC,IAAI,CAAC;IACtBE,aAAa,CAAC,IAAI,CAAC;IACnB;IACAC,YAAY,CAAC0B,OAAO,CAACtB,KAAK,GAAG,IAAI;EACnC,CAAC;EAED,oBACEjB,OAAA;IAAK0C,SAAS,EAAC,yBAAyB;IAAAC,QAAA,GACrClC,aAAa,iBACZT,OAAA;MAAK0C,SAAS,EAAC,gBAAgB;MAAAC,QAAA,GAC5B,OAAOlC,aAAa,KAAK,QAAQ,IAAIA,aAAa,CAACsB,UAAU,CAAC,YAAY,CAAC,gBAC1E/B,OAAA;QAAK0C,SAAS,EAAC,eAAe;QAAAC,QAAA,eAC5B3C,OAAA;UAAK4C,GAAG,EAAEnC,aAAc;UAACoC,GAAG,EAAC;QAAgB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7C,CAAC,gBAENjD,OAAA;QAAK0C,SAAS,EAAC,cAAc;QAAAC,QAAA,gBAC3B3C,OAAA;UAAG0C,SAAS,EAAC;QAAa;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC/BjD,OAAA;UAAA2C,QAAA,EAAOlC;QAAa;UAAAqC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzB,CACN,eACDjD,OAAA;QACE0C,SAAS,EAAC,eAAe;QACzBQ,OAAO,EAAET,YAAa;QACtB,cAAW,eAAe;QAAAE,QAAA,eAE1B3C,OAAA;UAAG0C,SAAS,EAAC;QAAc;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1B,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN,eAEDjD,OAAA;MAAM0C,SAAS,EAAC,cAAc;MAACS,QAAQ,EAAEjC,YAAa;MAAAyB,QAAA,gBACpD3C,OAAA;QACE8B,IAAI,EAAC,QAAQ;QACbY,SAAS,EAAC,mBAAmB;QAC7BQ,OAAO,EAAEZ,gBAAiB;QAC1B,cAAW,aAAa;QAAAK,QAAA,eAExB3C,OAAA;UAAG0C,SAAS,EAAC;QAAkB;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CAAC,eAETjD,OAAA;QACE8B,IAAI,EAAC,MAAM;QACXsB,GAAG,EAAEvC,YAAa;QAClBwC,QAAQ,EAAE7B,gBAAiB;QAC3B8B,KAAK,EAAE;UAAEC,OAAO,EAAE;QAAO,CAAE;QAC3BC,MAAM,EAAC;MAAkU;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1U,CAAC,eAEFjD,OAAA;QACE0C,SAAS,EAAC,eAAe;QACzBe,WAAW,EAAC,mBAAmB;QAC/BxC,KAAK,EAAEZ,OAAQ;QACfgD,QAAQ,EAAEvC,iBAAkB;QAC5B4C,UAAU,EAAErC,cAAe;QAC3BsC,QAAQ,EAAEpD;MAAY;QAAAuC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvB,CAAC,eAEFjD,OAAA;QACE8B,IAAI,EAAC,QAAQ;QACbY,SAAS,EAAC,aAAa;QACvBiB,QAAQ,EAAEtD,OAAO,CAACe,IAAI,CAAC,CAAC,KAAK,EAAE,IAAI,CAACT,UAAW;QAC/C,cAAW,cAAc;QAAAgC,QAAA,eAEzB3C,OAAA;UAAG0C,SAAS,EAAC;QAAoB;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEV,CAAC;AAAC7C,EAAA,CAhJIH,YAAY;AAAA2D,EAAA,GAAZ3D,YAAY;AAkJlB,eAAeA,YAAY;AAAC,IAAA2D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}