{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\academy-portal-test\\\\client\\\\src\\\\components\\\\dashboard\\\\Dashboard.js\",\n  _s = $RefreshSig$();\n// client/src/components/dashboard/Dashboard.js\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Sidebar from './Sidebar';\nimport ConversationList from '../conversations/ConversationList';\nimport MessageList from '../messages/MessageList';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Dashboard = ({\n  auth,\n  setAuth\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [activeConversation, setActiveConversation] = useState(null);\n  const [socket, setSocket] = useState(null);\n\n  // Initialize socket connection\n  useEffect(() => {\n    if (!auth.isAuthenticated) return;\n\n    // Connect to socket\n    const newSocket = io();\n    setSocket(newSocket);\n\n    // Authenticate socket connection\n    newSocket.emit('authenticate', localStorage.getItem('token'));\n\n    // Cleanup on unmount\n    return () => {\n      if (newSocket) {\n        newSocket.disconnect();\n      }\n    };\n  }, [auth.isAuthenticated]);\n\n  // Join conversation room when active conversation changes\n  useEffect(() => {\n    if (!socket || !activeConversation) return;\n\n    // Join conversation room\n    socket.emit('join_conversation', activeConversation._id);\n\n    // Leave conversation room when component unmounts or active conversation changes\n    return () => {\n      if (socket && activeConversation) {\n        socket.emit('leave_conversation', activeConversation._id);\n      }\n    };\n  }, [socket, activeConversation]);\n\n  // Redirect to login if not authenticated\n  useEffect(() => {\n    if (!auth.isAuthenticated && !auth.loading) {\n      navigate('/');\n    }\n  }, [auth, navigate]);\n\n  // Handle logout\n  const handleLogout = () => {\n    // Remove token from localStorage\n    localStorage.removeItem('token');\n\n    // Reset auth state\n    setAuth({\n      isAuthenticated: false,\n      user: null,\n      loading: false\n    });\n\n    // Disconnect socket\n    if (socket) {\n      socket.disconnect();\n    }\n\n    // Redirect to login\n    navigate('/');\n  };\n  if (auth.loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      user: auth.user,\n      onLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"conversation-panel\",\n        children: /*#__PURE__*/_jsxDEV(ConversationList, {\n          setActiveConversation: setActiveConversation,\n          activeConversation: activeConversation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-panel\",\n        children: /*#__PURE__*/_jsxDEV(MessageList, {\n          conversation: activeConversation,\n          user: auth.user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"DXLt5/e78/gTvfzqk228JUu8viA=\", false, function () {\n  return [useNavigate];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","Sidebar","ConversationList","MessageList","io","jsxDEV","_jsxDEV","Dashboard","auth","setAuth","_s","navigate","activeConversation","setActiveConversation","socket","setSocket","isAuthenticated","newSocket","emit","localStorage","getItem","disconnect","_id","loading","handleLogout","removeItem","user","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onLogout","conversation","_c","$RefreshReg$"],"sources":["C:/Users/user/academy-portal-test/client/src/components/dashboard/Dashboard.js"],"sourcesContent":["// client/src/components/dashboard/Dashboard.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Sidebar from './Sidebar';\r\nimport ConversationList from '../conversations/ConversationList';\r\nimport MessageList from '../messages/MessageList';\r\nimport io from 'socket.io-client';\r\n\r\nconst Dashboard = ({ auth, setAuth }) => {\r\n  const navigate = useNavigate();\r\n  const [activeConversation, setActiveConversation] = useState(null);\r\n  const [socket, setSocket] = useState(null);\r\n  \r\n  // Initialize socket connection\r\n  useEffect(() => {\r\n    if (!auth.isAuthenticated) return;\r\n    \r\n    // Connect to socket\r\n    const newSocket = io();\r\n    setSocket(newSocket);\r\n    \r\n    // Authenticate socket connection\r\n    newSocket.emit('authenticate', localStorage.getItem('token'));\r\n    \r\n    // Cleanup on unmount\r\n    return () => {\r\n      if (newSocket) {\r\n        newSocket.disconnect();\r\n      }\r\n    };\r\n  }, [auth.isAuthenticated]);\r\n  \r\n  // Join conversation room when active conversation changes\r\n  useEffect(() => {\r\n    if (!socket || !activeConversation) return;\r\n    \r\n    // Join conversation room\r\n    socket.emit('join_conversation', activeConversation._id);\r\n    \r\n    // Leave conversation room when component unmounts or active conversation changes\r\n    return () => {\r\n      if (socket && activeConversation) {\r\n        socket.emit('leave_conversation', activeConversation._id);\r\n      }\r\n    };\r\n  }, [socket, activeConversation]);\r\n  \r\n  // Redirect to login if not authenticated\r\n  useEffect(() => {\r\n    if (!auth.isAuthenticated && !auth.loading) {\r\n      navigate('/');\r\n    }\r\n  }, [auth, navigate]);\r\n  \r\n  // Handle logout\r\n  const handleLogout = () => {\r\n    // Remove token from localStorage\r\n    localStorage.removeItem('token');\r\n    \r\n    // Reset auth state\r\n    setAuth({\r\n      isAuthenticated: false,\r\n      user: null,\r\n      loading: false\r\n    });\r\n    \r\n    // Disconnect socket\r\n    if (socket) {\r\n      socket.disconnect();\r\n    }\r\n    \r\n    // Redirect to login\r\n    navigate('/');\r\n  };\r\n  \r\n  if (auth.loading) {\r\n    return <div className=\"loading\">Loading...</div>;\r\n  }\r\n  \r\n  return (\r\n    <div className=\"dashboard\">\r\n      <Sidebar user={auth.user} onLogout={handleLogout} />\r\n      \r\n      <div className=\"main-content\">\r\n        <div className=\"conversation-panel\">\r\n          <ConversationList\r\n            setActiveConversation={setActiveConversation}\r\n            activeConversation={activeConversation}\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"message-panel\">\r\n          <MessageList\r\n            conversation={activeConversation}\r\n            user={auth.user}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}